/* static/css/background.css
   Cosmic sky (night/day) + soft comfort flashes
   No shooting stars
*/

:root{
  --red:#ff2d55;
  --blue:#3b82f6;
  --purple:#a855f7;

  /* NIGHT */
  --nightTop:#050611;
  --nightMid:#070a1a;
  --nightBot:#0a0f18;

  /* DAY (clean + airy pastel) */
  --dayTop:#fbfdff;
  --dayMid:#f1f6ff;
  --dayBot:#eaf0ff;
}

/* ===== Base ===== */
body{
  background: linear-gradient(180deg, var(--nightTop), var(--nightMid) 48%, var(--nightBot));
  overflow-x:hidden;
}
:root[data-theme="light"] body{
  background: linear-gradient(180deg, var(--dayTop), var(--dayMid) 50%, var(--dayBot));
}

/* ===== Layers ===== */
body::before,
body::after{
  content:"";
  position:fixed;
  inset:-25vmax;
  pointer-events:none;
  z-index:-2;
}

/* Nebula / haze */
body::before{
  background:
    radial-gradient(900px 720px at 12% 16%, rgba(59,130,246,.22), transparent 62%),
    radial-gradient(900px 720px at 88% 18%, rgba(168,85,247,.22), transparent 62%),
    radial-gradient(980px 780px at 52% 92%, rgba(255,45,85,.18), transparent 64%),
    radial-gradient(860px 700px at 50% 55%, rgba(255,255,255,.04), transparent 70%),
    conic-gradient(from 210deg,
      rgba(255,45,85,.10),
      rgba(59,130,246,.10),
      rgba(168,85,247,.10),
      rgba(255,45,85,.10)
    );
  filter: blur(44px) saturate(1.18);
  opacity:.88;
  animation: nebulaDrift 18s ease-in-out infinite alternate;
}

:root[data-theme="light"] body::before{
  background:
    radial-gradient(1000px 820px at 14% 18%, rgba(59,130,246,.10), transparent 70%),
    radial-gradient(1000px 820px at 86% 16%, rgba(168,85,247,.10), transparent 70%),
    radial-gradient(1100px 860px at 56% 92%, rgba(255,45,85,.08), transparent 74%),
    radial-gradient(900px 720px at 50% 50%, rgba(255,255,255,.35), transparent 72%),
    conic-gradient(from 210deg,
      rgba(255,45,85,.05),
      rgba(59,130,246,.05),
      rgba(168,85,247,.05),
      rgba(255,45,85,.05)
    );
  filter: blur(58px) saturate(1.05);
  opacity:.60;
}

/* Stars (soft) — stronger in dark, nearly invisible in light */
body::after{
  background:
    radial-gradient(1.6px 1.6px at 10% 20%, rgba(255,255,255,.55), transparent 60%),
    radial-gradient(1.1px 1.1px at 22% 70%, rgba(255,255,255,.45), transparent 60%),
    radial-gradient(1.4px 1.4px at 35% 35%, rgba(255,255,255,.50), transparent 60%),
    radial-gradient(1px 1px at 48% 80%, rgba(255,255,255,.38), transparent 60%),
    radial-gradient(1.2px 1.2px at 62% 18%, rgba(255,255,255,.45), transparent 60%),
    radial-gradient(1px 1px at 72% 58%, rgba(255,255,255,.42), transparent 60%),
    radial-gradient(1.3px 1.3px at 84% 30%, rgba(255,255,255,.48), transparent 60%),
    radial-gradient(1.1px 1.1px at 90% 78%, rgba(255,255,255,.40), transparent 60%);
  opacity:.55;
  filter: blur(.25px);
  animation: starBreath 7.2s ease-in-out infinite;
}
:root[data-theme="light"] body::after{
  opacity:.08;
  filter: blur(.35px);
}

/* ===== Soft comfort flashes ===== */
.sky-flash{
  position:fixed;
  inset:-20vmax;
  pointer-events:none;
  z-index:-1;
  background:
    radial-gradient(920px 720px at 18% 28%, rgba(59,130,246,.10), transparent 66%),
    radial-gradient(920px 720px at 82% 24%, rgba(168,85,247,.10), transparent 66%),
    radial-gradient(920px 720px at 52% 88%, rgba(255,45,85,.08), transparent 70%);
  filter: blur(32px);
  opacity: 0;
  animation: comfortFlash 15s ease-in-out infinite;
}

:root[data-theme="light"] .sky-flash{
  background:
    radial-gradient(980px 760px at 18% 28%, rgba(59,130,246,.06), transparent 72%),
    radial-gradient(980px 760px at 82% 24%, rgba(168,85,247,.06), transparent 72%),
    radial-gradient(980px 760px at 52% 88%, rgba(255,45,85,.05), transparent 74%);
  filter: blur(36px);
  opacity: 0;
  animation: comfortFlashLight 17s ease-in-out infinite;
}

/* drift */
@keyframes nebulaDrift{
  0%   { transform: translate3d(-2.2vmax,-1.1vmax,0) scale(1.02); }
  50%  { transform: translate3d( 1.3vmax, 1.0vmax,0) scale(1.06); }
  100% { transform: translate3d( 2.6vmax,-1.0vmax,0) scale(1.10); }
}

/* star breathing */
@keyframes starBreath{
  0%,100%{ opacity:.48; }
  50%{ opacity:.62; }
}

/* subtle “flash”: short peaks, long calm */
@keyframes comfortFlash{
  0%{ opacity:0; transform: translate3d(-1.1vmax,-.6vmax,0) scale(1.02); }
  20%{ opacity:0; }
  24%{ opacity:.20; }
  30%{ opacity:.08; }
  58%{ opacity:0; transform: translate3d( 1.1vmax, .8vmax,0) scale(1.06); }
  76%{ opacity:0; }
  80%{ opacity:.16; }
  86%{ opacity:.06; }
  100%{ opacity:0; transform: translate3d(-.6vmax, .6vmax,0) scale(1.04); }
}

@keyframes comfortFlashLight{
  0%{ opacity:0; transform: translate3d(-1.0vmax,-.5vmax,0) scale(1.02); }
  24%{ opacity:0; }
  28%{ opacity:.12; }
  34%{ opacity:.05; }
  62%{ opacity:0; transform: translate3d( 1.0vmax, .7vmax,0) scale(1.05); }
  80%{ opacity:0; }
  84%{ opacity:.10; }
  90%{ opacity:.04; }
  100%{ opacity:0; transform: translate3d(-.5vmax, .5vmax,0) scale(1.04); }
}

@media (prefers-reduced-motion: reduce){
  body::before, body::after, .sky-flash{ animation:none; }
  .sky-flash{ opacity:0; }
}
