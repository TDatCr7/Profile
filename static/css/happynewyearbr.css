/* static/css/happynewyearbr.css
/* =========================================================
   BASE / LAYER SAFETY
   ========================================================= */
html,
body {
    height: 100%;
    position: relative;
}

body {
    position: relative;
    overflow-x: hidden;
}

/* FX root: luôn là nền (không che UI) */
.tet-fx {
    position: fixed;
    inset: 0;
    pointer-events: none;
    z-index: 0;
    /* nền */
    overflow: hidden;
}

/* canvases */
.tet-fx canvas,
#tetFireworks {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    display: block;
    background: transparent !important;
}

/* UI luôn ở trên hiệu ứng */
.site-header {
    position: sticky;
    top: 0;
    z-index: 50;
}

#appMain,
main,
.container,
.site-footer,
.home,
.about-wrap,
.certs-wrap,
.projects-wrap,
.contact-wrap,
.cinema-wrap {
    position: relative;
    z-index: 2;
}

/* Reduce motion */
@media (prefers-reduced-motion:reduce) {
    .tet-fx {
        display: none;
    }
}

/* =========================================================
   LIGHT THEME (hoa rơi / nền xuân dịu)
   ========================================================= */
:root[data-theme="light"] body {
    background:
        radial-gradient(1200px 820px at 18% 18%, rgba(255, 215, 90, .62), transparent 62%),
        radial-gradient(1200px 820px at 82% 20%, rgba(255, 160, 195, .46), transparent 64%),
        radial-gradient(1200px 900px at 50% 92%, rgba(255, 245, 210, .65), transparent 66%),
        linear-gradient(180deg, #fff3df 0%, #ffe9f0 42%, #eef7ff 100%);
}

:root[data-theme="light"] body::before {
    content: "";
    position: fixed;
    inset: -18vmax;
    pointer-events: none;
    z-index: -2;
    background:
        radial-gradient(900px 700px at 22% 18%, rgba(255, 255, 255, .70), transparent 72%),
        radial-gradient(900px 700px at 86% 22%, rgba(255, 255, 255, .58), transparent 74%),
        radial-gradient(1100px 860px at 50% 92%, rgba(255, 255, 255, .50), transparent 76%);
    filter: blur(22px);
    opacity: .62;
}

/* show petals, hide fireworks */
:root[data-theme="light"] .tet-fx .tet-petals {
    opacity: 1;
}

:root[data-theme="light"] .tet-fx .tet-fireworks,
:root[data-theme="light"] #tetFireworks {
    opacity: 0;
}

/* =========================================================
   DARK THEME (sao + pháo hoa)
   ========================================================= */
:root:not([data-theme="light"]) body {
    background:
        radial-gradient(1200px 900px at 18% 18%, rgba(255, 70, 140, .18), transparent 62%),
        radial-gradient(1200px 900px at 82% 20%, rgba(80, 160, 255, .18), transparent 64%),
        radial-gradient(1300px 980px at 52% 92%, rgba(180, 110, 255, .16), transparent 66%),
        linear-gradient(180deg, #040510 0%, #070a1a 46%, #0b1020 100%);
}

/* sao nền (dark) */
:root:not([data-theme="light"]) body::after {
    content: "";
    position: fixed;
    inset: -25vmax;
    pointer-events: none;
    z-index: -2;
    background:
        radial-gradient(1.5px 1.5px at 8% 18%, rgba(255, 255, 255, .60), transparent 60%),
        radial-gradient(1.1px 1.1px at 16% 62%, rgba(255, 255, 255, .45), transparent 60%),
        radial-gradient(1.2px 1.2px at 24% 28%, rgba(255, 255, 255, .50), transparent 60%),
        radial-gradient(1.0px 1.0px at 33% 78%, rgba(255, 255, 255, .38), transparent 60%),
        radial-gradient(1.3px 1.3px at 42% 38%, rgba(255, 255, 255, .55), transparent 60%),
        radial-gradient(1.0px 1.0px at 52% 16%, rgba(255, 255, 255, .44), transparent 60%),
        radial-gradient(1.2px 1.2px at 60% 58%, rgba(255, 255, 255, .42), transparent 60%),
        radial-gradient(1.3px 1.3px at 68% 30%, rgba(255, 255, 255, .50), transparent 60%),
        radial-gradient(1.1px 1.1px at 76% 80%, rgba(255, 255, 255, .36), transparent 60%),
        radial-gradient(1.3px 1.3px at 84% 22%, rgba(255, 255, 255, .52), transparent 60%),
        radial-gradient(1.1px 1.1px at 90% 68%, rgba(255, 255, 255, .38), transparent 60%);
    opacity: .62;
    filter: blur(.25px);
    animation: tetStarTwinkle 7.5s ease-in-out infinite;
}

@keyframes tetStarTwinkle {

    0%,
    100% {
        opacity: .55;
    }

    50% {
        opacity: .75;
    }
}

/* fireworks nổi hơn, petals tắt */
:root:not([data-theme="light"]) .tet-fx .tet-fireworks,
:root:not([data-theme="light"]) #tetFireworks {
    opacity: .55;
    mix-blend-mode: screen;
}

:root:not([data-theme="light"]) .tet-fx .tet-petals {
    opacity: 0;
}

/* =========================================================
   HAPPY NEW YEAR TEXT (1 bản duy nhất)
   - luôn là nền: dưới UI (z-index:1)
   - light: có stroke để không chìm
   - dark: hue + pulse
   ========================================================= */
.tet-ny-text {
    position: fixed;
    left: 16px;
    top: 16px;
    z-index: 1;
    /* dưới UI (2), dưới header (50) */
    pointer-events: none;
    mix-blend-mode: normal;

    text-transform: uppercase;
    font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    font-weight: 950;
    letter-spacing: .18em;
    line-height: .98;

    transition: opacity .18s ease, transform .18s ease;
}

.tet-ny-line1 {
    font-size: 14px;
    margin-bottom: 4px;
    font-weight: 950;
    letter-spacing: .18em;
}

.tet-ny-line2 {
    font-size: 34px;
    font-weight: 950;
    letter-spacing: .12em;

    display: inline-flex;
    align-items: baseline;
    gap: 10px;

    background: linear-gradient(90deg, #ff8a00, #ff2d55, #6d28d9, #0284c7, #16a34a);
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
}

.tet-ny-year {
    font-size: .62em;
    letter-spacing: .12em;
    position: relative;
    top: -0.22em;

    background: inherit;
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
}

/* Light text contrast */
:root[data-theme="light"] .tet-ny-line1 {
    color: rgba(25, 25, 25, .92);
    text-shadow: 0 2px 0 rgba(255, 255, 255, .90), 0 10px 24px rgba(0, 0, 0, .12);
}

:root[data-theme="light"] .tet-ny-line2 {
    -webkit-text-stroke: 1px rgba(0, 0, 0, .18);
    text-shadow: 0 12px 28px rgba(0, 0, 0, .10);
}

/* Dark neon animation */
:root:not([data-theme="light"]) .tet-ny-text {
    animation: nyHue 2.4s linear infinite, nyPulse 1.6s ease-in-out infinite;
}

:root:not([data-theme="light"]) .tet-ny-line1 {
    color: rgba(255, 255, 255, .92);
    text-shadow: 0 10px 26px rgba(0, 0, 0, .35);
}

:root:not([data-theme="light"]) .tet-ny-line2 {
    background: linear-gradient(90deg, #ffcf4a, #ff4d9d, #7c5cff, #2bd7ff, #68ff6a);
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
    filter: drop-shadow(0 14px 30px rgba(0, 0, 0, .40));
}

@keyframes nyHue {
    0% {
        filter: hue-rotate(0deg) drop-shadow(0 0 10px rgba(255, 200, 120, .30)) drop-shadow(0 0 22px rgba(120, 200, 255, .18));
    }

    50% {
        filter: hue-rotate(160deg) drop-shadow(0 0 12px rgba(255, 80, 120, .28)) drop-shadow(0 0 26px rgba(200, 140, 255, .18));
    }

    100% {
        filter: hue-rotate(360deg) drop-shadow(0 0 10px rgba(255, 200, 120, .30)) drop-shadow(0 0 22px rgba(120, 200, 255, .18));
    }
}

@keyframes nyPulse {

    0%,
    100% {
        opacity: .88;
        transform: translateY(0);
    }

    50% {
        opacity: 1;
        transform: translateY(-1px);
    }
}

/* hide helper (nếu JS thêm class) */
.tet-ny-text.is-hide {
    opacity: 0;
    transform: translateY(-8px);
}

/* Mobile: đẩy xuống dưới island */
@media (max-width:720px) {
    .tet-ny-text {
        left: 14px;
        top: calc(env(safe-area-inset-top) + 78px);
        letter-spacing: .14em;
    }

    .tet-ny-line2 {
        font-size: clamp(22px, 8vw, 30px);
    }

    .tet-ny-year {
        font-size: .95em;
    }
}

/* =========================================================
   MOBILE: scroll hide header + ny text (1 bản duy nhất)
   Lưu ý: ny text có animation => khi ẩn cần tắt animation để transform ăn chắc
   ========================================================= */
@media (max-width:720px) {
    .site-header {
        will-change: transform;
        transition: transform .22s cubic-bezier(.2, .8, .2, 1);
        transform: translate3d(0, 0, 0);
    }

    .tet-ny-text {
        will-change: transform, opacity;
        transition: transform .22s cubic-bezier(.2, .8, .2, 1), opacity .22s cubic-bezier(.2, .8, .2, 1);
    }

    .site-header.is-scroll-hide {
        transform: translate3d(0, -120%, 0);
    }

    .tet-ny-text.is-scroll-hide {
        opacity: 0;
        transform: translate3d(0, -160%, 0);
        animation: none !important;
        /* tránh đè transform */
    }
}

/* =========================================================
   NIGHT: card rõ hơn khi nền fireworks (chỉ chỉnh token)
   ========================================================= */
:root:not([data-theme="light"]) {
    --surface: rgba(10, 12, 24, .92);
    --surface-1: rgba(10, 12, 24, .78);
    --surface-2: rgba(10, 12, 24, .70);
    --surface-inset: rgba(10, 12, 24, .76);
    --border: rgba(255, 255, 255, .16);
}

:root:not([data-theme="light"]) .surface,
:root:not([data-theme="light"]) .surface-soft,
:root:not([data-theme="light"]) .surface-inset,
:root:not([data-theme="light"]) .card,
:root:not([data-theme="light"]) .text-panel,
:root:not([data-theme="light"]) .portrait-card,
:root:not([data-theme="light"]) .about-card,
:root:not([data-theme="light"]) .cert-card,
:root:not([data-theme="light"]) .projects-hero,
:root:not([data-theme="light"]) .contact-card {
    backdrop-filter: blur(6px);
    -webkit-backdrop-filter: blur(6px);
}